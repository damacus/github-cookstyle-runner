{"id":"github-cookstyle-runner-0jj","title":"Replace string interpolation with structured logging in cache.rb","description":"**Problem:**\ncache.rb uses string interpolation in log messages (lines 81, 185, 189, 201) instead of structured logging with payloads, violating the logging guidelines in docs/development/logging-guidelines.md.\n\n**Examples:**\nLine 81: @logger.debug(\"Saved cache to \\#{@file}\")\nShould be: @logger.debug('Saved cache', payload: { file: @file, operation: 'save_cache' })\n\n**Solution:**\nConvert all log statements in cache.rb to use structured logging with payload parameter.\n\n**Acceptance Criteria:**\n- All logging follows structured format\n- Consistent key naming (operation, file, etc.)\n- Tests verify structured logging","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-14T10:10:05.440905Z","created_by":"Dan Webb","updated_at":"2026-02-14T10:10:05.440905Z"}
{"id":"github-cookstyle-runner-0y3","title":"Add exponential backoff for GitHub API rate limiting","description":"**Problem:**\nThe application lacks retry logic with exponential backoff for GitHub API rate limit errors. According to README.md, GitHub has rate limits (5,000 requests/hour), but there's no automatic retry mechanism.\n\n**Solution:**\nImplement exponential backoff in github_api.rb and github_pr_manager.rb:\n- Detect rate limit errors (403 with X-RateLimit-Remaining: 0)\n- Implement exponential backoff (1s, 2s, 4s, 8s, 16s)\n- Log retry attempts with structured payloads\n- Make retry count configurable via GCR_API_RETRY_COUNT\n\n**Acceptance Criteria:**\n- Rate limit errors trigger automatic retry\n- Exponential backoff implemented\n- Max retries configurable\n- Structured logging of retry attempts\n- Integration tests with VCR","status":"open","priority":2,"issue_type":"feature","owner":"dan.webb@damacus.io","created_at":"2026-02-14T10:10:50.781022Z","created_by":"Dan Webb","updated_at":"2026-02-14T10:10:50.781022Z"}
{"id":"github-cookstyle-runner-3i1","title":"Enhance PR/Issue descriptions with Cookstyle documentation links","description":"**Problem:**\nPR and issue descriptions in cookstyle_operations.rb lack links to Cookstyle cop documentation, making it harder for developers to understand and fix violations.\n\n**Solution:**\nUpdate format_manual_offense and format_offenses to include:\n- Links to cop documentation\n- Severity indicators with emojis\n- Code snippets showing the violation location\n\n**Acceptance Criteria:**\n- Links to Cookstyle docs for each cop\n- Visual severity indicators\n- More structured, readable format\n- Tests verify formatting","status":"open","priority":3,"issue_type":"feature","owner":"dan.webb@damacus.io","created_at":"2026-02-14T10:11:05.533145Z","created_by":"Dan Webb","updated_at":"2026-02-14T10:11:05.533145Z"}
{"id":"github-cookstyle-runner-3kg","title":"Make Cookstyle timeout configurable","description":"**Problem:**\nThe Cookstyle command timeout is hardcoded to 300 seconds in cookstyle_operations.rb (line 128). Large repositories may need longer timeouts.\n\n**Solution:**\n1. Add GCR_COOKSTYLE_TIMEOUT environment variable (default: 300)\n2. Update configuration.rb and settings_validator.rb\n3. Pass timeout from configuration to cookstyle_operations\n4. Update README.md configuration table\n\n**Acceptance Criteria:**\n- Configurable via GCR_COOKSTYLE_TIMEOUT\n- Default remains 300 seconds\n- Configuration validated (must be positive integer)\n- Documentation updated\n- Tests verify timeout is respected","status":"open","priority":3,"issue_type":"feature","owner":"dan.webb@damacus.io","created_at":"2026-02-14T10:11:01.896937Z","created_by":"Dan Webb","updated_at":"2026-02-14T10:11:01.896937Z"}
{"id":"github-cookstyle-runner-4gx","title":"Eliminate T.untyped usage across codebase","description":"**Problem:**\nFound T.untyped usage in 10 files which violates the project's Sorbet strict mode requirements. According to .windsurf/rules/rules.md, T.untyped and T.unsafe are prohibited.\n\n**Files affected:**\n- lib/cookstyle_runner/repository_processor.rb (line 58, 133)\n- lib/cookstyle_runner/cache.rb (multiple locations)\n- lib/cookstyle_runner/authentication.rb (line 21)\n- config/validators/settings_validator.rb\n- lib/cookstyle_runner/git.rb\n- lib/cookstyle_runner/formatter.rb\n- lib/cookstyle_runner/reporter.rb\n- lib/cookstyle_runner/cache_entry.rb\n- lib/cookstyle_runner/cache_stats.rb\n\n**Solution:**\nReplace all T.untyped with proper type annotations. Use T.nilable, T::Hash, T::Array with specific types instead.\n\n**Acceptance Criteria:**\n- No T.untyped or T.unsafe in codebase\n- All Sorbet type checks pass\n- All tests pass","status":"closed","priority":1,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-14T10:10:00.907259Z","created_by":"Dan Webb","updated_at":"2026-02-14T20:26:09.953797Z","closed_at":"2026-02-14T20:26:09.953797Z","close_reason":"Completed: removed all T.untyped/T.unsafe usage across lib/config, added regression lint spec, and verified with RSpec + RuboCop."}
{"id":"github-cookstyle-runner-i64","title":"Add comprehensive integration tests for cache system","description":"**Problem:**\nThe cache system (cache.rb, cache_entry.rb, cache_stats.rb) appears to lack comprehensive integration tests that verify:\n- Cache persistence across application restarts\n- Concurrent access from multiple threads\n- Cache expiration behavior\n- Recovery from corrupted cache files\n- Cache statistics accuracy\n\n**Solution:**\nAdd integration tests in spec/integration/cache_integration_spec.rb covering all scenarios.\n\n**Acceptance Criteria:**\n- Integration test file created\n- All scenarios covered\n- Tests use realistic data\n- Tests verify thread safety\n- Coverage for error scenarios\n- Tests pass consistently","status":"open","priority":2,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-14T10:11:14.263719Z","created_by":"Dan Webb","updated_at":"2026-02-14T10:11:14.263719Z"}
{"id":"github-cookstyle-runner-pi3","title":"Improve authentication error messages with troubleshooting context","description":"**Problem:**\nauthentication.rb uses generic error messages that don't provide enough troubleshooting context at lines 171 and 198.\n\n**Solution:**\nEnhance error messages with:\n- Which authentication methods were attempted\n- What environment variables were checked\n- Links to authentication documentation\n- Specific missing credentials\n\n**Acceptance Criteria:**\n- Detailed error messages\n- Include which variables are missing/invalid\n- Link to documentation\n- Tests verify error messages","status":"open","priority":3,"issue_type":"task","owner":"dan.webb@damacus.io","created_at":"2026-02-14T10:10:54.048037Z","created_by":"Dan Webb","updated_at":"2026-02-14T10:10:54.048037Z"}
{"id":"github-cookstyle-runner-rbr","title":"Eliminate duplicate RepoContext creation in repository_processor.rb","description":"**Problem:**\nRepoContext creation is duplicated in 4 places in repository_processor.rb:\n- Lines 149-154 (current_sha method)\n- Lines 176-180 (run_cookstyle_checks)\n- Lines 222-227 (handle_auto_correctable_issues)\n- Lines 238-243 (handle_auto_correctable_issues - git operations)\n\n**Solution:**\nExtract a helper method that creates RepoContext from repo_dir to follow DRY principle.\n\n**Acceptance Criteria:**\n- Single method for RepoContext creation\n- DRY principle followed\n- All tests pass\n- Sorbet type checks pass","status":"open","priority":2,"issue_type":"chore","owner":"dan.webb@damacus.io","created_at":"2026-02-14T10:10:58.285356Z","created_by":"Dan Webb","updated_at":"2026-02-14T10:10:58.285356Z"}
{"id":"github-cookstyle-runner-s2v","title":"Add Prometheus metrics for observability","description":"**Problem:**\nThe application lacks metrics/instrumentation for production monitoring. No visibility into processing time, cache hit/miss rates, API requests, error rates, or queue depth.\n\n**Solution:**\nAdd prometheus_exporter gem and instrument key operations with metrics:\n- cookstyle_repos_processed_total (counter)\n- cookstyle_processing_duration_seconds (histogram)\n- cookstyle_cache_hit_rate (gauge)\n- cookstyle_api_requests_total (counter)\n- cookstyle_errors_total (counter)\n\n**Acceptance Criteria:**\n- prometheus_exporter integrated\n- /metrics endpoint available\n- Key operations instrumented\n- Documentation in docs/\n- Example Grafana dashboard (JSON)","status":"open","priority":2,"issue_type":"feature","owner":"dan.webb@damacus.io","created_at":"2026-02-14T10:11:08.58424Z","created_by":"Dan Webb","updated_at":"2026-02-14T10:11:08.58424Z"}
{"id":"github-cookstyle-runner-s82","title":"Refactor process_repository method - exceeds 15-line limit","description":"**Problem:**\nThe process_repository method in repository_processor.rb is 129 lines (lines 58-129), significantly exceeding the project's 15-line method length limit from .rubocop.yml.\n\n**Solution:**\nExtract helper methods following the 'Extract, Don't Expand' principle from .windsurf/rules/rules.md:\n- extract_repository_state (SHA fetching + cache check)\n- run_and_handle_cookstyle\n- handle_cookstyle_results\n\nKeep the public API stable while extracting internal helpers.\n\n**Acceptance Criteria:**\n- process_repository \u003c= 15 lines\n- Helper methods are private\n- All tests pass\n- RuboCop passes","status":"closed","priority":1,"issue_type":"chore","owner":"dan.webb@damacus.io","created_at":"2026-02-14T10:10:45.870488Z","created_by":"Dan Webb","updated_at":"2026-02-14T20:29:17.821129Z","closed_at":"2026-02-14T20:29:17.821129Z","close_reason":"completed"}
